<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Chatbot de Vendas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
    #chat { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; }
    .mensagem { margin: 10px 0; }
    .bot { color: #007BFF; font-weight: bold; }
    .produto { border: 1px solid #ddd; padding: 10px; margin: 10px 0; border-radius: 5px; text-align: left; }
    .produto img { max-width: 100%; border-radius: 5px; }
    .comprar-btn { background: #28a745; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    .comprar-btn:hover { background: #218838; }
    .remover-btn { background: #dc3545; color: white; border: none; padding: 5px; border-radius: 5px; cursor: pointer; margin-left: 10px; }
    .remover-btn:hover { background: #c82333; }
    #carrinho { margin-top: 20px; font-weight: bold; background: #fff; padding: 15px; border-radius: 8px; max-width: 600px; margin: 20px auto; }
    .categoria-btn { background: #007BFF; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; margin: 5px; }
    .categoria-btn:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>Chatbot de Vendas üõí</h1>
  <div id="chat"></div>
  <input type="text" id="input" placeholder="Digite o nome do produto..." style="width:80%; padding:10px;">
  <button onclick="buscarProduto()">Buscar</button>

  <h3>Categorias:</h3>
  <button class="categoria-btn" onclick="mostrarCategoria('roupas')">Roupas</button>
  <button class="categoria-btn" onclick="mostrarCategoria('cal√ßados')">Cal√ßados</button>
  <button class="categoria-btn" onclick="mostrarCategoria('acessorios')">Acess√≥rios</button>
<img src="assets/logo.png" alt="Logo" width="200">
    
  <div id="carrinho">Carrinho: vazio</div>

  <script>
    let dados = null;
    let carrinho = [];

    // Carrega cat√°logo de produtos
    fetch("produtos.json")
      .then(response => response.json())
      .then(data => { dados = data; });

    function buscarProduto() {
      let entrada = document.getElementById("input").value.toLowerCase();
      let chat = document.getElementById("chat");

      if (!dados) {
        chat.innerHTML += `<div class="mensagem bot">Carregando cat√°logo...</div>`;
        return;
      }

      let encontrado = null;
      for (let categoria in dados.categorias) {
        encontrado = dados.categorias[categoria].find(p => p.nome.toLowerCase().includes(entrada));
        if (encontrado) break;
      }

      if (encontrado) {
        exibirProduto(encontrado);
      } else {
        chat.innerHTML += `<div class="mensagem bot">‚ùå Produto n√£o encontrado. Tente outro nome.</div>`;
      }

      document.getElementById("input").value = "";
    }

    function mostrarCategoria(categoria) {
      let chat = document.getElementById("chat");
      chat.innerHTML = `<h3>${categoria.toUpperCase()}</h3>`;
      dados.categorias[categoria].forEach(produto => exibirProduto(produto));
    }

    function exibirProduto(produto) {
      let chat = document.getElementById("chat");
      chat.innerHTML += `
        <div class="mensagem bot">
          <div class="produto">
            <h3>${produto.nome}</h3>
            <img src="${produto.imagem}" alt="${produto.nome}">
            <p>${produto.descricao}</p>
            <p><strong>R$ ${produto.preco.toFixed(2)}</strong></p>
            <button class="comprar-btn" onclick="adicionarCarrinho('${produto.nome}')">Adicionar ao Carrinho</button>
          </div>
        </div>`;
    }

    function adicionarCarrinho(nomeProduto) {
      let produto = null;
      for (let categoria in dados.categorias) {
        let encontrado = dados.categorias[categoria].find(p => p.nome === nomeProduto);
        if (encontrado) { produto = encontrado; break; }
      }
      carrinho.push(produto);
      atualizarCarrinho();
    }

    function removerCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      if (carrinho.length === 0) {
        document.getElementById("carrinho").innerHTML = "Carrinho: vazio";
        return;
      }

      let total = carrinho.reduce((sum, item) => sum + item.preco, 0);
      let html = "<h3>Carrinho:</h3><ul>";
      carrinho.forEach((item, index) => {
        html += `<li>${item.nome} - R$ ${item.preco.toFixed(2)} 
          <button class="remover-btn" onclick="removerCarrinho(${index})">Remover</button></li>`;
      });
      html += `</ul><p><strong>Total: R$ ${total.toFixed(2)}</strong></p>`;
      document.getElementById("carrinho").innerHTML = html;
    }
  </script>
</body>
</html>
